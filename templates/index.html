<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot Dashboard</title>
  <link rel="stylesheet" href="../static/styles.css">
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="user-info">
        <!-- User Icon -->
        <img src="https://t4.ftcdn.net/jpg/05/09/59/75/360_F_509597532_RKUuYsERhODmkxkZd82pSHnFtDAtgbzJ.jpg" alt="User Icon" class="user-icon">
      </div>

      <!-- Document upload section -->
      <button onclick="showUploadModal()">Add Document</button>

      <!-- Language Selection -->
      <button>Select Language</button>

      <!-- Group Creation -->
      <button onclick="showFileGroupModal()">Create Group</button>

      <!-- Previous Chats Section -->
      <div class="previous-chats">
        <h4>Previous Chats</h4>
        <ul id="chatList"></ul>
      </div>

      <!-- Settings & Help Section -->
      <div class="bottom-options">
        <button class="settings-btn">
          <img src="https://static-00.iconduck.com/assets.00/settings-icon-1964x2048-8nigtrtt.png" alt="Settings Icon" width="20px" height="20px"> Settings
        </button>
        <button class="help-btn">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828940.png" alt="Help Icon" width="20px" height="20px"> Help
        </button>
      </div>
    </div>

    <!-- Chat Section -->
    <div class="chat-section">
      <div class="chat-header">
        <h2>Chat</h2>
        <button onclick="startNewChat()">New Chat</button>
      </div>
      <div class="chat-area" id="chatArea">
        <!-- Chat bubbles will be added here dynamically -->
      </div>

      <!-- Spinner for processing (rotating animation) -->
      <div id="spinner" style="display: none; text-align: center; margin-top: 10px;">
        <img src="      https://openclipart.org/image/2000px/311779
        " alt="Loading..." style="width: 50px; height: 50px; animation: rotate 1s linear infinite;">
      </div>
      <!-- Error message display -->
      <div id="errorMessage" style="color: red; display: none; text-align: center;"></div>

      <!-- Chat Input -->
      <div class="chat-input">
        <div class="filter-icon" onclick="toggleFilterDialog()">
          <img src="https://cdn-icons-png.flaticon.com/512/107/107799.png" alt="Filter" style="width: 15px; height: 15px; border-radius: 20%;">
        </div>
        <input type="text" id="chatMessage" placeholder="Type a message here...">
        <button onclick="sendMessage()">Send</button>
      </div>

      
      <!-- Filter Options Dialog -->
      <div id="filterDialog" class="modal" style="display: none;">
        <div class="modal-content">
          <span class="close" onclick="toggleFilterDialog()">&times;</span>
          <h2>Filter Options</h2>
          <br>
          <form id="filterForm">
            <label>
              <input type="radio" name="filter" value="all" checked> All
            </label><br>
            <label>
              <input type="radio" name="filter" value="group"> Query by Groups
            </label>
            <div id="groupListContainer" class="group-list-container" style="display: none;">
              <!-- File groups will be populated here -->
            </div>
            <button type="button" id="applyFilter" style="display: none;">Apply</button>
          </form>
        </div>
      </div>


  <!-- Drag-and-drop modal -->
  <div id="uploadModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="hideUploadModal()">&times;</span>
      <h2>Upload Files</h2>
      <div class="drop-area" ondrop="handleDrop(event)" ondragover="allowDrop(event)">
        <p>Drag & Drop Files Here</p>
        <input type="file" id="fileUpload" multiple onchange="uploadDocument(event)" style="display: none;" />
        <button onclick="document.getElementById('fileUpload').click();">Select Files</button>
      </div>
    </div>
  </div>

  <div id="fileGroupModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="hideFileGroupModal()">&times;</span>
    <h2>Create File Group</h2><br><br>
    <form id="fileGroupForm">
      <label for="groupName">Group Name:</label>
      <input type="text" id="groupName" name="groupName" required>
      <br><br>
      <p align="left">Select files you want to include:</p>
      <div id="existingFiles" style="max-height: 200px; overflow-y: auto; border: 1px solid #ccc; padding: 10px;">
        <!-- Existing files will be populated here -->
      </div>
      <br>
      <button type="submit" id="groupsubmit">Create</button>
    </form>
  </div>
</div>

 <script src="../static/script.js"></script>
</body>
</html>
