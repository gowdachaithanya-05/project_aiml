<!-- templates/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot Dashboard</title>
  <link rel="stylesheet" href="../static/styles.css">
  <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="user-info">
        <!-- User Icon -->
        <img src="https://t4.ftcdn.net/jpg/05/09/59/75/360_F_509597532_RKUuYsERhODmkxkZd82pSHnFtDAtgbzJ.jpg" alt="User Icon" class="user-icon">
      </div>

      <!-- Document upload section -->
      <button onclick="hideFileGroupModal()">Chat</button>

      <!-- Document upload section -->
      <button onclick="showUploadModal()">Add Document</button>

      <!-- Language Selection 
      <button>Select Language</button>-->

      <!-- Group Creation -->
      <button onclick="showFileGroupModal()">Group</button>

      <!-- Previous Chats Section -->
      <div class="previous-chats">
        <h4>Previous Chats</h4>
        <ul id="chatList"></ul>
      </div>

      <!-- Settings & Help Section -->
      <div class="bottom-options">
        <button class="settings-btn">
          <img src="https://static-00.iconduck.com/assets.00/settings-icon-1964x2048-8nigtrtt.png" alt="Settings Icon" width="20px" height="20px"> Settings
        </button>
        <button class="help-btn">
          <img src="https://cdn-icons-png.flaticon.com/512/1828/1828940.png" alt="Help Icon" width="20px" height="20px"> Help
        </button>
      </div>
    </div>

      <!-- Chat Section -->
    <div class="chat-section">
      <div class="chat-header">
        <h2>Chat</h2>
        <button onclick="startNewChat()">New Chat</button>
      </div>
      <div class="chat-area" id="chatArea">
        <!-- Chat bubbles will be added here dynamically -->
      </div>

      <!-- Spinner for processing (rotating animation) -->
      <div id="spinner" style="display: none; text-align: center; margin-top: 10px;">
        <img src="      https://openclipart.org/image/2000px/311779
        " alt="Loading..." style="width: 50px; height: 50px; animation: rotate 1s linear infinite;">
      </div>
      <!-- Error message display -->
      <div id="errorMessage" style="color: red; display: none; text-align: center;"></div>
      <div id="filterContainer" class="filter-container">
        <form id="filterForm">
          <!-- ME HP -->
          <div id="errorContainer" style="color:red; display:none; text-align: center"></div>
          <!-- ME HP -->
          <label>
            <input type="radio" name="filter" value="all" checked> All
          </label><br>
          <label>
            <input type="radio" name="filter" value="group"> Query by Groups
          </label>
          <div id="groupListContainer" class="group-list-container" style="display: none;">
            <!-- File groups will be populated here -->
          </div>
          <button type="button" id="applyFilter" style="display: none; float: right;">Apply</button>
        </form>
      </div>
      <!-- Chat Input -->
      <div class="chat-input">
        <input type="text" id="chatMessage" placeholder="Type a message here...">
        <button onclick="sendMessage()">Send</button>
      </div>

    <div id="uploadModal" class="modal uploads">
      <div class="modal-content cuploads">
        <span class="close" onclick="hideUploadModal()">&times;</span>
        <h2>Upload Files</h2>
        <div id="dropZone" class="drop-area" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
          <p>Drag & Drop Files Here</p>
          <input type="file" id="fileUpload" multiple onchange="uploadDocument(event)" style="display: none;" />
          <button onclick="document.getElementById('fileUpload').click();">Select Files</button>
        </div>
      </div>
    </div>
  
  
    <div id="fileGroupModal" class="modal groups">
    <div class="modal-content cgroups">
      <span class="close" onclick="hideFileGroupModal()">&times;</span>
      <h2>Create New Group</h2><br>
      <div class="create">
      <form id="fileGroupForm">
        <label for="groupName">Group Name:</label>
        <input type="text" id="groupName" name="groupName" required>
        <br><br>
        <p align="left">Select files you want to include:</p>
        <div id="existingFiles" style="max-height: 100px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; text-align: left">
          <!-- Existing files will be populated here -->
        </div>
        <br>
        <button type="submit" id="groupsubmit" class="groupformbutton">Create</button>
      </form>
    </div><br>
      <hr><br>
      
      <h2>Your Groups</h2><br>
      <div class="group-tiles-container">
      <div id="groupTiles" class="group-tiles">
        <!-- Existing groups will be displayed here as tiles -->
      </div>
    </div>
  </div>
  </div>
  
  <div id="spinnerDialog" class="spinner-dialog" style="display: none;">
    <p>Uploading files, please wait...</p>
    <div class="spinner"></div>
  </div>

    <!-- Include the cleaned-up script.js -->
    <script src="../static/script.js" defer></script>
  </div>
</body>
</html>
